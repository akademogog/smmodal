{"version":3,"sources":["smmodalJq.js"],"names":["smModals","overModal","SmModal","modalSettings","_classCallCheck","this","modalSettingsDefault","closeSelector","modalSpeed","openAnimate","closeAnimate","transitionTimingFunction","backgroundBlur","backgroundBlurValue","overlay","verticalCenter","closeEsc","makeModal","_this","beforeOpenVar","afterOpenVar","beforeCloseVar","afterCloseVar","modalSelector","beforeOpen","afterOpen","beforeClose","afterClose","currentPadding","parseInt","$","find","css","replace","sideModal","adaptiveModal","undefined","addClass","attr","removeClass","document","on","e","keyCode","hasClass","closeModal","off","window","width","scrollbarWidth","openSm","_this2","length","scrollTop","fixCenterOnIE","overflow","padding-right","push","setTimeout","_this3","pop","ua","navigator","userAgent","toLowerCase","test","paddingTop","outerHeight","documentWidth","documentElement","clientWidth","innerWidth","each"],"mappings":"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","file":"smmodalJq.min.js","sourcesContent":["// Класс модального окна\r\nvar smModals = [];\r\nvar overModal = [];\r\n\r\nclass SmModal {\r\n    constructor(modalSettings) {\r\n        // Стандатные настройки плагина\r\n        var modalSettingsDefault = {\r\n            closeSelector: '.modal-close',\r\n            modalSpeed: 500,\r\n            openAnimate: 'smFade',\r\n            closeAnimate: 'smFade',\r\n            transitionTimingFunction: 'ease',\r\n            backgroundBlur: false,\r\n            backgroundBlurValue: '5px',\r\n            overlay: 'background-color: rgba(0, 0, 0, 0.7)',\r\n            verticalCenter: true,\r\n            closeEsc: true,\r\n        };\r\n        \r\n        this.modalSettingsDefault = modalSettingsDefault;\r\n\r\n        this.makeModal(modalSettings);\r\n    }\r\n    // Метод создания модального окна\r\n    makeModal(modalSettings) {\r\n        // Установка пользовательских переменых экземпляра плагина\r\n        this.beforeOpenVar = false;\r\n        this.afterOpenVar = false;\r\n        this.beforeCloseVar = false;\r\n        this.afterCloseVar = false;\r\n        this.modalSelector = modalSettings.modalSelector;\r\n        this.closeSelector = modalSettings.closeSelector;\r\n        this.modalSpeed = modalSettings.modalSpeed;\r\n        this.openAnimate = modalSettings.openAnimate;\r\n        this.closeAnimate = modalSettings.closeAnimate;\r\n        this.transitionTimingFunction = modalSettings.transitionTimingFunction;\r\n        this.beforeOpen = modalSettings.beforeOpen;\r\n        this.afterOpen = modalSettings.afterOpen;\r\n        this.beforeClose = modalSettings.beforeClose;\r\n        this.afterClose = modalSettings.afterClose;        \r\n        this.currentPadding = parseInt($(this.modalSelector).find('.sm-modal-body').css('padding-top').replace('px', ''));\r\n        this.backgroundBlur = modalSettings.backgroundBlur;\r\n        this.backgroundBlurValue = modalSettings.backgroundBlurValue;\r\n        this.overlay = modalSettings.overlay;\r\n        this.verticalCenter = modalSettings.verticalCenter;\r\n        this.closeEsc = modalSettings.closeEsc;\r\n        this.sideModal = modalSettings.sideModal;\r\n        this.adaptiveModal = modalSettings.adaptiveModal;\r\n        // Установка стандартных переменных если нету пользовательских\r\n        if (this.closeSelector === undefined) {\r\n            this.closeSelector = this.modalSettingsDefault.closeSelector;\r\n        }\r\n        if (this.modalSpeed === undefined) {\r\n            this.modalSpeed = this.modalSettingsDefault.modalSpeed;\r\n        }\r\n        if (this.openAnimate === undefined) {\r\n            this.openAnimate = this.modalSettingsDefault.openAnimate;\r\n        }\r\n        if (this.closeAnimate === undefined) {\r\n            this.closeAnimate = this.modalSettingsDefault.closeAnimate;\r\n        }\r\n        if (this.transitionTimingFunction === undefined) {\r\n            this.transitionTimingFunction = this.modalSettingsDefault.transitionTimingFunction;\r\n        }\r\n        if (this.backgroundBlur === undefined) {\r\n            this.backgroundBlur = this.modalSettingsDefault.backgroundBlur;\r\n        }\r\n        if (this.backgroundBlurValue === undefined) {\r\n            this.backgroundBlurValue = this.modalSettingsDefault.backgroundBlurValue;\r\n        }\r\n        if (this.overlay === undefined) {\r\n            this.overlay = this.modalSettingsDefault.overlay;\r\n        }\r\n        if (this.verticalCenter === undefined) {\r\n            this.verticalCenter = this.modalSettingsDefault.verticalCenter;\r\n        }\r\n        if (this.closeEsc === undefined) {\r\n            this.closeEsc = this.modalSettingsDefault.closeEsc;\r\n        }\r\n\r\n        // Боковая модалка\r\n        if (this.sideModal === 'left') {\r\n            $(this.modalSelector).addClass('leftModal');\r\n        } else if (this.sideModal === 'right') {\r\n            $(this.modalSelector).addClass('rightModal');\r\n        }\r\n        // Отмена вертикального центрирования для всех браузеров кроме IE\r\n        if (this.verticalCenter === false) {\r\n            $(this.modalSelector).find('.sm-modal-wrap').css('align-items', 'flex-start');\r\n        }\r\n        // Применить стили к подложке\r\n        $(this.modalSelector).find('.sm-modal-overlay').attr('style', this.overlay);\r\n        // Инициализация классов анимации\r\n        $(this.modalSelector).css('transition', 'all 0s ' + this.transitionTimingFunction);\r\n        $(this.modalSelector).find('.sm-modal-contant').css('transition', 'all 0s ' + this.transitionTimingFunction);\r\n        $(this.modalSelector).removeClass(this.closeAnimate);\r\n        $(this.modalSelector).addClass(this.openAnimate);\r\n        // Закрытие при нажатии на Esc\r\n        if (this.closeEsc === true) {\r\n            $(document).on('keyup', (e) => {\r\n                if (e.keyCode === 27 && $(this.modalSelector).hasClass('active')) {\r\n                    this.closeModal();\r\n                };\r\n            });\r\n        }\r\n        // Закрытие при клике на overlay\r\n        $(this.modalSelector).on('click', '.sm-modal-overlay', (e) => {\r\n            this.closeModal();\r\n        });\r\n        // Закрытие при клике на кнопку закрытия (параметр - \"closeSelector\")\r\n        $(this.modalSelector + ' ' + this.closeSelector).off('click').on('click', () => {\r\n            this.closeModal();\r\n        });\r\n\r\n        // Адаптивная модалка\r\n        if (this.adaptiveModal !== undefined) {\r\n            if ($(window).width() + scrollbarWidth() <= this.adaptiveModal) {\r\n                $(this.modalSelector).removeClass('sm-adaptive');\r\n            }\r\n\r\n            $(window).on('resize', function(){\r\n                if ($(window).width() + scrollbarWidth() <= modalSettings.adaptiveModal) {\r\n                    $(modalSettings.modalSelector).removeClass('sm-adaptive');\r\n                } else {\r\n                    $(modalSettings.modalSelector).addClass('sm-adaptive');\r\n                }\r\n            });\r\n        }\r\n    }\r\n    // Метод открытия с проверкой на адаптивность модального окна\r\n    openModal() {\r\n        if (this.adaptiveModal !== undefined) {\r\n            if ($(window).width() + scrollbarWidth() <= this.adaptiveModal) {\r\n                this.openSm();\r\n            }\r\n        } else {\r\n            this.openSm();\r\n        }\r\n    }\r\n    // Метод открытия модального окна\r\n    openSm() {\r\n        // Выполнить функцию beforeOpen, если она была задана\r\n        if (this.beforeOpen !== undefined) {\r\n            this.beforeOpen();\r\n        }\r\n        // Открываем модальное окно с z-index 5000 или выше уже открытого модального окна\r\n        if (overModal.length === 0) {\r\n            $(this.modalSelector).css('z-index', '5000');\r\n        } else {\r\n            $(this.modalSelector).css('z-index', parseInt(overModal[overModal.length - 1]) + 1);\r\n        }\r\n        // Устанавливаем сколл моадльного окна в 0\r\n        $(this.modalSelector).find(\".sm-modal-body\").scrollTop(0);\r\n        // Центрируем блок модалки по вертикале на IE\r\n        if (this.verticalCenter === true) {\r\n            this.fixCenterOnIE();\r\n        }\r\n        // Включить блюр заднего фона\r\n        if (this.backgroundBlur === true) {\r\n            $(this.modalSelector).css('backdrop-filter', 'blur(' + this.backgroundBlurValue + ')');\r\n        }\r\n        // Анимация появления\r\n        $(this.modalSelector).css('transition', 'all ' + this.modalSpeed + 'ms ' + this.transitionTimingFunction);\r\n        $(this.modalSelector).find('.sm-modal-contant').css('transition', 'all ' + this.modalSpeed + 'ms ' + this.transitionTimingFunction);\r\n        // Открытие модалки\r\n        $(this.modalSelector).removeClass(this.openAnimate).addClass('active');\r\n        // Срытие скролл бара body при открытии\r\n        if (overModal.length === 0) {\r\n            $('body').css({\r\n                'overflow': 'hidden',\r\n                'padding-right': scrollbarWidth(),\r\n            });\r\n        }\r\n        // Модалка поверх модалки\r\n        overModal.push($(this.modalSelector).css('z-index'));\r\n        // Выполнить функцию afterOpen, если она была задана\r\n        setTimeout(() => {\r\n            if (this.afterOpen !== undefined) {\r\n                this.afterOpen();\r\n            }\r\n        }, this.modalSpeed);\r\n    }\r\n    // Метод закрытия модального окна\r\n    closeModal() {\r\n        // Выполнить функцию beforeClose, если она была задана\r\n        if (this.beforeClose !== undefined) {\r\n            this.beforeClose();\r\n        }\r\n        overModal.pop();\r\n        // Выключить блюр заднего фона\r\n        if (this.backgroundBlur === true) {\r\n            $(this.modalSelector).css('backdrop-filter', 'blur(0px)');\r\n        }\r\n        // Закрытие модалки\r\n        $(this.modalSelector).removeClass(this.openAnimate);\r\n        $(this.modalSelector).addClass(this.closeAnimate).removeClass('active');\r\n        // Вернуть скролл бар body\r\n        setTimeout(() => {\r\n            if (overModal.length === 0) {\r\n                $('body').css({\r\n                    'overflow': 'auto',\r\n                    'padding-right': '',\r\n                });\r\n            }\r\n            $(this.modalSelector).css('transition', 'all 0s ' + this.transitionTimingFunction);\r\n            $(this.modalSelector).find('.sm-modal-contant').css('transition', 'all 0s ' + this.transitionTimingFunction);\r\n            $(this.modalSelector).removeClass(this.closeAnimate);\r\n            $(this.modalSelector).addClass(this.openAnimate);\r\n            // Выполнить функцию afterClose, если она была задана\r\n            if (this.afterClose !== undefined) {\r\n                this.afterClose();\r\n            }\r\n        }, this.modalSpeed);\r\n    }\r\n    // Метод вертикального центрирования окна в браузере IE\r\n    fixCenterOnIE() {\r\n        // Переменные для определения браузера IE\r\n        var ua = window.navigator.userAgent.toLowerCase(),\r\n            is_ie = (/trident/gi).test(ua) || (/msie/gi).test(ua);\r\n        // Проверка на IE\r\n        if (is_ie == true) {\r\n            // Расчет необходимой величины padding-top b для центрирования\r\n            var windowHeight = $(window).outerHeight();\r\n            var contentHeight = $(this.modalSelector).find('.sm-modal-contant').outerHeight();\r\n            var paddingTop = (windowHeight - contentHeight) / 2;\r\n            // Если пользовательский паддинг меньше расчетного то центрировать блок\r\n            if (this.currentPadding < paddingTop) {\r\n                $(this.modalSelector).find('.sm-modal-body').css('padding', paddingTop + 'px 0px');\r\n            } else { // В противном случае не меняем паддинг и даем блоку margin-bottom для фикса нижнего отступа на IE\r\n                $(this.modalSelector).find('.sm-modal-contant').css('margin-bottom', this.currentPadding + 'px');\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n$('.sm-modal').each(function(e){\r\n    smModals['#' + $(this).attr('id')] = new SmModal({\r\n        modalSelector: '#' + $(this).attr('id'),\r\n    });\r\n});\r\n\r\n// Функция расчета ширины скроллбара\r\nfunction scrollbarWidth() {\r\n    var documentWidth = parseInt(document.documentElement.clientWidth);\r\n    var windowsWidth = parseInt(window.innerWidth);\r\n    var scrollbarWidth = windowsWidth - documentWidth;\r\n    return scrollbarWidth;\r\n}"]}