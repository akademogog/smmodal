"use strict";function _instanceof(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function _classCallCheck(e,t){if(!_instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}var overModal=[],SmModal=function(){function u(e){var t=this;_classCallCheck(this,u);var o=".modal-close",i=500,s="smFade",l="smFade",a="ease",n=!1,r="header, main, footer",d="5px",c="background-color: rgba(0, 0, 0, 0.7)",h=!0,m=!0;this.beforeOpenVar=!1,this.afterOpenVar=!1,this.beforeCloseVar=!1,this.afterCloseVar=!1,this.modalSelector=e.modalSelector,this.closeSelector=e.closeSelector,this.modalSpeed=e.modalSpeed,this.openAnimate=e.openAnimate,this.closeAnimate=e.closeAnimate,this.transitionTimingFunction=e.transitionTimingFunction,this.beforeOpen=e.beforeOpen,this.afterOpen=e.afterOpen,this.beforeClose=e.beforeClose,this.afterClose=e.afterClose,this.currentPadding=parseInt($(this.modalSelector).find(".sm-modal-body").css("padding-top").replace("px","")),this.backgroundBlur=e.backgroundBlur,this.backgroundBlurEl=e.backgroundBlurEl,this.backgroundBlurValue=e.backgroundBlurValue,this.overlay=e.overlay,this.verticalCenter=e.verticalCenter,this.closeEsc=e.closeEsc,this.sideModal=e.sideModal,void 0===this.closeSelector&&(this.closeSelector=o),void 0===this.modalSpeed&&(this.modalSpeed=i),void 0===this.openAnimate&&(this.openAnimate=s),void 0===this.closeAnimate&&(this.closeAnimate=l),void 0===this.transitionTimingFunction&&(this.transitionTimingFunction=a),void 0===this.backgroundBlur&&(this.backgroundBlur=n),void 0===this.backgroundBlurEl&&(this.backgroundBlurEl=r),void 0===this.backgroundBlurValue&&(this.backgroundBlurValue=d),void 0===this.overlay&&(this.overlay=c),void 0===this.verticalCenter&&(this.verticalCenter=h),void 0===this.closeEsc&&(this.closeEsc=m),"left"===this.sideModal?$(this.modalSelector).addClass("leftModal"):"right"===this.sideModal&&$(this.modalSelector).addClass("rightModal"),!1===this.verticalCenter&&$(this.modalSelector).find(".sm-modal-wrap").css("align-items","flex-start"),$(this.modalSelector).find(".sm-modal-body").attr("style",this.overlay),$(this.modalSelector).css("transition","all 0s "+this.transitionTimingFunction),$(this.modalSelector).find(".sm-modal-contant").css("transition","all 0s "+this.transitionTimingFunction),$(this.modalSelector).removeClass(this.closeAnimate),$(this.modalSelector).addClass(this.openAnimate),!0===this.closeEsc&&$(document).on("keyup",function(e){27===e.keyCode&&$(t.modalSelector).hasClass("active")&&t.closeModal()}),$(this.modalSelector).off("click").on("click",function(e){t.modalBody=$(t.modalSelector).find(".sm-modal-body"),t.modalWrap=$(t.modalSelector).find(".sm-modal-wrap"),($(e.target).is(t.modalBody)||t.modalWrap.is($(e.target)))&&t.closeModal()}),$(this.modalSelector+" "+this.closeSelector).off("click").on("click",function(){t.closeModal()})}return _createClass(u,[{key:"openModal",value:function(){var e=this;void 0!==this.beforeOpen&&this.beforeOpen(),0===overModal.length?$(this.modalSelector).css("z-index","5000"):$(this.modalSelector).css("z-index",parseInt(overModal[overModal.length-1])+1),$(this.modalSelector).find(".sm-modal-body").scrollTop(0),!0===this.verticalCenter&&this.fixCenterOnIE(),!0===this.backgroundBlur&&$(this.backgroundBlurEl).css("filter","blur("+this.backgroundBlurValue+")"),$(this.modalSelector).css("transition","all "+this.modalSpeed+"ms "+this.transitionTimingFunction),$(this.modalSelector).find(".sm-modal-contant").css("transition","all "+this.modalSpeed+"ms "+this.transitionTimingFunction),$(this.modalSelector).removeClass(this.openAnimate).addClass("active"),0===overModal.length&&$("body").css({overflow:"hidden","padding-right":scrollbarWidth()}),overModal.push($(this.modalSelector).css("z-index")),setTimeout(function(){void 0!==e.afterOpen&&e.afterOpen()},this.modalSpeed)}},{key:"closeModal",value:function(){var e=this;void 0!==this.beforeClose&&this.beforeClose(),overModal.pop(),!0===this.backgroundBlur&&$(this.backgroundBlurEl).css("filter","blur(0px)"),$(this.modalSelector).removeClass(this.openAnimate),$(this.modalSelector).addClass(this.closeAnimate).removeClass("active"),setTimeout(function(){0===overModal.length&&$("body").removeAttr("style"),$(e.modalSelector).css("transition","all 0s "+e.transitionTimingFunction),$(e.modalSelector).find(".sm-modal-contant").css("transition","all 0s "+e.transitionTimingFunction),$(e.modalSelector).removeClass(e.closeAnimate),$(e.modalSelector).addClass(e.openAnimate),void 0!==e.afterClose&&e.afterClose()},this.modalSpeed)}},{key:"fixCenterOnIE",value:function(){var e=window.navigator.userAgent.toLowerCase();if(1==(/trident/gi.test(e)||/msie/gi.test(e))){var t=($(window).outerHeight()-$(this.modalSelector).find(".sm-modal-contant").outerHeight())/2;this.currentPadding<t?$(this.modalSelector).find(".sm-modal-body").css("padding",t+"px 0px"):$(this.modalSelector).find(".sm-modal-contant").css("margin-bottom",this.currentPadding+"px")}}}]),u}();function scrollbarWidth(){var e=parseInt(document.documentElement.clientWidth);return parseInt(window.innerWidth)-e}